name: Gemini Code Review

on:
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]

jobs:
  gemini-review:
    if: contains(github.event.comment.body, '@gemini')
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Run Gemini AI Code Review
        uses: google/generative-ai-action@v1
        with:
          google_api_key: ${{ secrets.GEMINI_API_KEY }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
          model: gemini-1.5-pro
          prompt: |
            The user wrote: "${{ github.event.comment.body }}"
            Please analyze the relevant code in this PR and reply with an insightful review or fix suggestion.

